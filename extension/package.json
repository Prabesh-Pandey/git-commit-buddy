{
  "name": "git-autopush-on-save",
  "displayName": "Git AutoPush on Save",
  "description": "Run git-autopush.sh automatically when files matching configured globs are saved.",
  "publisher": "local",
  "repository": {
    "type": "git",
    "url": "https://github.com/local/git-autopush-on-save.git"
  },
  "version": "0.0.1",
  "engines": {"vscode": "^1.60.0"},
  "categories": ["Other"],
  "contributes": {
    "commands": [
      {
        "command": "git-autopush.toggleAutoCommit",
        "title": "Git AutoPush: Toggle Auto Commit"
      },
      {
        "command": "git-autopush.toggleAutoPush",
        "title": "Git AutoPush: Toggle Auto Push"
      },
      {
        "command": "git-autopush.setApiKey",
        "title": "Git AutoPush: Set AI API Key (machine-local)"
      },
      {
        "command": "git-autopush.generateMessage",
        "title": "Git AutoPush: Generate Commit Message (AI)"
      },
      {
        "command": "git-autopush.runOnce",
        "title": "Git AutoPush: Run Once Now"
      },
      {
        "command": "git-autopush.pause",
        "title": "Git AutoPush: Pause/Resume"
      }
      ,
      {
        "command": "git-autopush.saveAndRun",
        "title": "Git AutoPush: Save & Run (Ctrl+S)"
      }
    ],
    "keybindings": [
      {
        "command": "git-autopush.saveAndRun",
        "key": "ctrl+s",
        "when": "editorTextFocus"
      }
    ],
    "configuration": {
      "title": "Git AutoPush",
      "properties": {
        "gitAutopush.autoCommit": {
          "type": "boolean",
          "default": false,
          "description": "Enable automatic commits on save (opt-in)."
        },
        "gitAutopush.autoPush": {
          "type": "boolean",
          "default": false,
          "description": "Enable automatic push after commit (opt-in)."
        },
        "gitAutopush.dryRun": {
          "type": "boolean",
          "default": true,
          "description": "When true, actions are logged but not executed. Safe default."
        },
        "gitAutopush.scriptPath": {
          "type": "string",
          "default": "${workspaceFolder}/git-autopush.sh",
          "description": "Path to the `git-autopush.sh` script to run."
        },
        "gitAutopush.watchGlobs": {
          "type": "array",
          "items": { "type": "string" },
          "default": ["**/*.{py,js,ts,md,json,txt}"],
          "description": "Glob patterns of files to watch for saves."
        },
        "gitAutopush.protectedBranches": {
          "type": "array",
          "items": { "type": "string" },
          "default": ["main", "master", "production"],
          "description": "Branches where auto-push is disabled by default."
        },
        "gitAutopush.sensitiveFileGlobs": {
          "type": "array",
          "items": { "type": "string" },
          "default": [".env", "*.key", "credentials.json", "*.pem"],
          "description": "File globs that must never be auto-committed."
        }
        ,"gitAutopush.ai.enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable AI-generated commit messages (opt-in)."
        },
        "gitAutopush.ai.provider": {
          "type": "string",
          "default": "deepseek",
          "enum": ["deepseek"],
          "description": "AI provider to use for generating commit messages. Currently only DeepSeek is supported."
        },
        "gitAutopush.ai.apiKey": {
          "type": "string",
          "default": "",
          "description": "API key for the selected AI provider. This key is stored machine-locally and not logged or synced.",
          "scope": "machine"
        },
        "gitAutopush.ai.deepseekApiKey": {
          "type": "string",
          "default": "",
          "description": "(Optional) DeepSeek API key. If set, this overrides `gitAutopush.ai.apiKey` for DeepSeek calls.",
          "scope": "machine"
        },
        "gitAutopush.ai.deepseekModel": {
          "type": "string",
          "default": "deepseek/deepseek-r1-0528:free",
          "description": "DeepSeek model identifier to use for commit message generation.",
          "scope": "machine"
        },
        "gitAutopush.ai.generateCommitMessage": {
          "type": "boolean",
          "default": false,
          "description": "When true, attempt to generate commit messages via AI (requires opt-in and API key)."
        },
        "gitAutopush.ai.deepseekUrl": {
          "type": "string",
          "default": "",
          "description": "(Optional) DeepSeek API URL to use when `ai.provider` is set to `deepseek`. If empty, default DeepSeek endpoint will be used."
        },
        "gitAutopush.ai.reviewBeforeCommit": {
          "type": "boolean",
          "default": true,
          "description": "When true, present the AI-generated commit message for user review/edit before committing."
        }
      }
    }
  },
  "activationEvents": [
    "onStartupFinished",
    "onCommand:git-autopush.toggleAutoCommit",
    "onCommand:git-autopush.toggleAutoPush",
    "onCommand:git-autopush.runOnce",
    "onCommand:git-autopush.pause"
  ],
  "main": "./dist/extension.js",
  "scripts": {
    "vscode:prepublish": "npm run build",
    "compile": "tsc -p ./",
    "build": "npm run compile",
    "watch": "tsc -watch -p ./"
  },
  "devDependencies": {
    "typescript": "^4.4.3",
    "@types/node": "^14.14.37",
    "@types/vscode": "^1.60.0",
    "@types/minimatch": "^5.0.0"
  },
  "dependencies": {
    "minimatch": "^5.1.0"
  }
}
